<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@5"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@5/themes.css"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/theme-change@2.0.2/index.js"></script>
    <script src="https://unpkg.com/html5-qrcode"></script>

    <title>Price Checker - Scanner</title>
  </head>
  <body>
    <div class="drawer drawer-mobile">
      <!-- Checkbox toggles sidebar -->
      <input id="sidebar-toggle" type="checkbox" class="drawer-toggle" />

      <!-- Sidebar -->
      <div
        class="drawer-side min-h-[calc(100vh-4rem)] w-64 fixed top-16 left-0 z-40 bg-base-100 text-base-content"
      >
        <label for="sidebar-toggle" class="drawer-overlay"></label>

        <ul class="menu p-4 overflow-y-auto w-64">
          <li>
          <li><a href="/index.html" class="font-semibold">Price Checker</a></li>
          </li>
          <li>
            <details>
              <summary class="cursor-pointer font-semibold">Products</summary>
              <ul class="p-2">
                <li><a href="/productList.html">List</a></li>
              </ul>
            </details>
          </li>
        </ul>
      </div>

      <!-- Main content -->
      <div class="drawer-content flex flex-col min-h-screen">
        <!-- Navbar -->
        <div class="navbar bg-base-100 shadow-sm">
          <div class="navbar-start">
            <!-- Sidebar toggle button visible always -->
            <label
              for="sidebar-toggle"
              tabindex="0"
              class="btn btn-ghost lg:hidden"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h8m-8 6h16"
                />
              </svg>
            </label>
            <a href="./index.html" class="btn btn-ghost text-xl normal-case">Store Name</a>
          </div>

          <div class="navbar-end">
            <!-- Dark/Light mode toggle button on right side -->
            <button
              data-toggle-theme="dark,light"
              data-act-class="ACTIVECLASS"
              type="button"
              class="theme-toggle btn btn-ghost text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5"
              aria-label="Toggle Dark Mode"
            >
              <!-- Dark icon (moon) -->
              <svg
                class="theme-toggle-dark-icon w-5 h-5"
                fill="currentColor"
                viewBox="0 0 20 20"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                ></path>
              </svg>
              <!-- Light icon (sun) -->
              <svg
                class="theme-toggle-light-icon w-5 h-5 hidden"
                fill="currentColor"
                viewBox="0 0 20 20"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 
                  0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 
                  001.414-1.414l-.707-.707a1 1 0 
                  00-1.414 1.414zm2.12-10.607a1 1 0 010 
                  1.414l-.706.707a1 1 0 
                  11-1.414-1.414l.707-.707a1 1 0 
                  011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 
                  100 2h1zm-7 4a1 1 0 011 
                  1v1a1 1 0 11-2 0v-1a1 1 0 
                  011-1zM5.05 6.464A1 1 0 
                  106.465 5.05l-.708-.707a1 1 0 
                  00-1.414 1.414l.707.707zm1.414 
                  8.486l-.707.707a1 1 0 
                  01-1.414-1.414l.707-.707a1 1 0 
                  011.414 1.414zM4 11a1 1 0 
                  100-2H3a1 1 0 000 2h1z"
                ></path>
              </svg>
            </button>
          </div>
        </div>

        <!-- Main page content here -->
        <main class="p-6">
          <div
            class="card max-w-md mx-auto bg-base-300 dark:bg-base-300 shadow-lg rounded-lg p-6 space-y-4"
          >
            <!-- Banner Header -->
            <div class="text-center">
              <img
                src="/assets/images/logio1.png"
                alt="Store Logo"
                class="mx-auto rounded-lg h-40 w-full mb-4"
              />
              <!-- <h2 class="text-lg font-semibold text-base-content">
                 Sari-Sari Store
              </h2> -->
                   <!-- Title -->
            <h1
              class="text-4xl text-[#0967C2] font-bold text-center text-primary"
            >
              ðŸ“¦ Price Checker
            </h1>
          
            </div>

           <p class="text-center text-md text-base-content/60">
                Developed by Gian Lloyd Pinote
              </p>

            <!-- Buttons -->
            <div class="flex space-x-2">
              <button
                id="start-scan-btn"
                class="btn bg-[#0967C2] text-white border-[#0059b3] btn-lg flex-1"
              >
                ðŸ“· Scan Barcode
              </button>
            </div>

            <!-- Camera Preview -->
            <div
              id="reader"
              class="w-full bg-base-200 dark:bg-base-300 mt-4 rounded-lg overflow-hidden"
              style="height: 400px"
            ></div>

            <!-- Zoom & Flash -->
            <div class="flex space-x-4 mb-2">
              <button
                id="toggle-torch-btn"
                class="btn btn-warning btn-sm hidden"
              >
                Flashlight
              </button>
              <button id="zoom-out-btn" class="btn btn-outline btn-sm hidden">
                <span id="zoom-out-level"> Zoom Out: 1x </span>
              </button>
              <button id="zoom-in-btn" class="btn btn-outline btn-sm hidden">
                <span id="zoom-in-level"> Zoom In: 1x </span>
              </button>
            </div>

            <!-- Scanned Results -->
            <div>
              <h3 class="text-xl font-semibold text-base-content mb-4">
                Scanned Barcodes
              </h3>
              <ul
                id="scanned-list"
                class="list-disc pl-6 text-base-content/90 space-y-3 max-h-60 overflow-y-auto bg-base-100 dark:bg-base-300 p-4 rounded-lg shadow h-30"
              ></ul>
            </div>
          </div>
        </main>
      </div>
    </div>

    <div
      id="product-sidebar"
      class="fixed top-0 right-0 w-80 h-full bg-base-100 shadow-lg p-4 z-50 transform translate-x-full transition-transform duration-300"
    >
      <h2 class="text-xl font-bold text-base-content mb-4">âž• Add Product</h2>

      <form id="product-form" class="space-y-4">
        <!-- Barcode -->
        <div>
          <label class="label">
            <span class="label-text">Barcode</span>
          </label>
          <input
            id="sidebar-barcode"
            type="text"
            readonly
            class="input input-bordered w-full bg-base-200 cursor-not-allowed"
          />
        </div>

        <!-- Product Name -->
        <div>
          <label class="label">
            <span class="label-text">Product Name</span>
          </label>
          <input
            id="sidebar-name"
            type="text"
            class="input input-bordered w-full"
            placeholder="e.g. Coke 1L"
          />
        </div>

        <!-- Price -->
        <div>
          <label class="label">
            <span class="label-text">Price</span>
          </label>
          <input
            id="sidebar-price"
            type="number"
            class="input input-bordered w-full"
            placeholder="e.g. 30"
          />
        </div>

        <!-- Category -->
        <div>
          <label class="label">
            <span class="label-text">Category</span>
          </label>
          <select id="sidebar-category" class="select select-bordered w-full">
            <option value="" disabled selected>Select a category</option>
          </select>
        </div>

        <!-- Submit Button -->
        <button
          id="submit-btn"
          type="submit"
          class="btn btn-success w-full gap-2 disabled:opacity-50"
        >
          <span
            id="spinner"
            class="loading loading-spinner loading-md hidden"
          ></span>
          <span id="btn-text">Save Product</span>
        </button>
      </form>
    </div>

    <!-- Overlay for closing -->
    <div
      id="sidebar-overlay"
      class="fixed inset-0 bg-black bg-opacity-30 z-40 hidden"
    ></div>

  <!-- <button class="btn" onclick="display_product_modal.showModal()">open modal</button> -->

  <dialog id="display_product_modal" class="modal">
    <div class="modal-box">
      <button
        type="button"
        class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2"
        onclick="display_product_modal.close()"
      >
        âœ•
      </button>
      <h3 class="font-bold text-lg mb-8">Product Found</h3>

      <div class="mb-4">
        <span class="label-text text-sm font-medium">Name</span>
        <label
          id="display-name"
          class="block w-full bg-base-200 text-base-content rounded px-3 py-2 mt-1"
        ></label>
      </div>

      <div class="mb-4">
        <span class="label-text text-sm font-medium">Category</span>
        <label
          id="display-category"
          class="block w-full bg-base-200 text-base-content rounded px-3 py-2 mt-1"
        ></label>
      </div>

      <div class="mb-4">
        <span class="label-text text-sm font-medium">Barcode</span>
        <label
          id="display-barcode"
          class="block w-full bg-base-200 text-yellow-600 font-semibold rounded px-3 py-2 mt-1"
        >
          
        </label>
      </div>

      <div>
        <span class="label-text text-sm font-medium">Price</span>
        <label
          id="display-price"
          class="block w-full bg-base-200 text-green-600 font-bold rounded px-3 py-2 mt-1"
        >
          
        </label>
      </div>
    </div>
  </dialog>



    <script type="module" src="/assets/js/loadCategories.js"></script>
    <script type="module" src="/assets/js/cameraManager.js"></script>
    <script type="module" src="/assets/js/addProduct.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="./assets/js/handleTheme.js"></script>
  </body>
</html>
